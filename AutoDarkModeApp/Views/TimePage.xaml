<Page
    x:Class="AutoDarkModeApp.Views.TimePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:CommunityToolkit.WinUI.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:helpers="using:AutoDarkModeApp.Helpers"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="using:CommunityToolkit.WinUI"
    mc:Ignorable="d">
    <Page.Resources>
        <!--  These are converters for different controls  -->
        <helpers:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
    </Page.Resources>

    <ScrollViewer>
        <Grid
            x:Name="ContentArea"
            Margin="{StaticResource NavigationViewPageContentMargin}"
            VerticalAlignment="Top">
            <StackPanel
                MaxWidth="1000"
                HorizontalAlignment="Stretch"
                Spacing="{StaticResource SettingsCardSpacing}">

                <!--  AutoThemeSwitching  -->
                <TextBlock Style="{StaticResource SettingsSectionHeaderTextBlockStyle}" Text="{helpers:ResourceString Name=lblSwitch}" />
                <controls:SettingsExpander Header="{helpers:ResourceString Name=autoCheckBox}">
                    <ToggleSwitch x:Name="ToggleAutoSwitchEnabled" IsOn="{x:Bind ViewModel.IsAutoThemeSwitchingEnabled, Mode=OneWay}" />
                    <controls:SettingsExpander.Items>
                        <controls:SettingsCard IsEnabled="{x:Bind ToggleAutoSwitchEnabled.IsOn, Mode=OneWay}">
                            <controls:SettingsCard.Header>
                                <RadioButtons>
                                    <RadioButton
                                        x:Name="RadioButtonCustomTimes"
                                        Content="{helpers:ResourceString Name=rbCustomHours}"
                                        IsChecked="{x:Bind ViewModel.IsCustomTimes, Mode=TwoWay}" />
                                    <RadioButton
                                        x:Name="RadioButtonLocationTimes"
                                        Content="{helpers:ResourceString Name=rbLocation}"
                                        IsChecked="{x:Bind ViewModel.IsLocationTimes, Mode=TwoWay}" />
                                    <RadioButton
                                        x:Name="RadioButtonCoordinateTimes"
                                        Content="{helpers:ResourceString Name=rbLocationGeo}"
                                        IsChecked="{x:Bind ViewModel.IsCoordinateTimes, Mode=TwoWay}" />
                                    <RadioButton
                                        x:Name="RadioButtonWindowsNightLight"
                                        Content="{helpers:ResourceString Name=TimePageFollowNightLight}"
                                        IsChecked="{x:Bind ViewModel.IsWindowsNightLight, Mode=TwoWay}" />
                                </RadioButtons>
                            </controls:SettingsCard.Header>
                        </controls:SettingsCard>
                    </controls:SettingsExpander.Items>
                </controls:SettingsExpander>

                <!--  Custom time  -->
                <StackPanel
                    MaxWidth="1000"
                    HorizontalAlignment="Stretch"
                    Spacing="{StaticResource SettingsCardSpacing}"
                    Visibility="{x:Bind RadioButtonCustomTimes.IsChecked, Converter={StaticResource BoolToVisibilityConverter}, Mode=OneWay}">
                    <TextBlock Style="{StaticResource SettingsSectionHeaderTextBlockStyle}" Text="{helpers:ResourceString Name=lblCustomStart}" />
                    <controls:SettingsCard>
                        <controls:SettingsCard.Header>
                            <StackPanel Orientation="Vertical" Spacing="32">
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <FontIcon FontSize="16" Glyph="&#xE706;" />
                                    <TextBlock Text="{helpers:ResourceString Name=lblLight}" />
                                </StackPanel>
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <FontIcon FontSize="16" Glyph="&#xe708;" />
                                    <TextBlock Text="{helpers:ResourceString Name=lblDark}" />
                                </StackPanel>
                            </StackPanel>
                        </controls:SettingsCard.Header>
                        <StackPanel Orientation="Vertical" Spacing="32">
                            <TimePicker ClockIdentifier="{x:Bind ViewModel.TimePickHourClock, Mode=OneWay}" Time="{x:Bind ViewModel.TimeLightStart, Mode=TwoWay}" />
                            <TimePicker ClockIdentifier="{x:Bind ViewModel.TimePickHourClock, Mode=OneWay}" Time="{x:Bind ViewModel.TimeDarkStart, Mode=TwoWay}" />
                        </StackPanel>
                    </controls:SettingsCard>
                </StackPanel>

                <!--  Location  -->
                <StackPanel
                    MaxWidth="1000"
                    HorizontalAlignment="Stretch"
                    Spacing="{StaticResource SettingsCardSpacing}"
                    Visibility="{x:Bind ViewModel.LocationSettingsCardVisibility, Mode=OneWay}">
                    <TextBlock Style="{StaticResource SettingsSectionHeaderTextBlockStyle}" Text="{helpers:ResourceString Name=headerLocationData}" />
                    <controls:SettingsCard Description="{x:Bind ViewModel.LocationNextUpdateDateDescription, Mode=OneWay}">
                        <controls:SettingsCard.Header>
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <FontIcon FontSize="16" Glyph="&#xE707;" />
                                <TextBlock Text="{x:Bind ViewModel.LocationBlockText, Mode=OneWay}" />
                                <FontIcon
                                    Margin="60,0,0,0"
                                    FontSize="16"
                                    Glyph="&#xE706;" />
                                <TextBlock Text="{x:Bind ViewModel.LightTimeBlockText, Mode=OneWay}" />
                                <FontIcon
                                    Margin="60,0,0,0"
                                    FontSize="16"
                                    Glyph="&#xe708;" />
                                <TextBlock Text="{x:Bind ViewModel.DarkTimeBlockText, Mode=OneWay}" />
                            </StackPanel>
                        </controls:SettingsCard.Header>
                    </controls:SettingsCard>
                </StackPanel>

                <!--  GeoCoordinates  -->
                <StackPanel
                    MaxWidth="1000"
                    HorizontalAlignment="Stretch"
                    Spacing="{StaticResource SettingsCardSpacing}"
                    Visibility="{x:Bind RadioButtonCoordinateTimes.IsChecked, Converter={StaticResource BoolToVisibilityConverter}, Mode=OneWay}">
                    <TextBlock Style="{StaticResource SettingsSectionHeaderTextBlockStyle}" Text="{helpers:ResourceString Name=headerGeoCoordinates}" />
                    <controls:SettingsCard Description="{helpers:ResourceString Name=EnterToApply}" Header="{helpers:ResourceString Name=headerGeoCoordinates}">
                        <StackPanel Orientation="Horizontal" Spacing="16">
                            <NumberBox
                                Width="120"
                                Header="{helpers:ResourceString Name=TimeNumberBoxHeaderLat}"
                                Value="{x:Bind ViewModel.LatValue, Mode=TwoWay}" />
                            <NumberBox
                                Width="120"
                                Header="{helpers:ResourceString Name=TimeNumberBoxHeaderLon}"
                                Value="{x:Bind ViewModel.LonValue, Mode=TwoWay}" />
                        </StackPanel>
                    </controls:SettingsCard>
                    <controls:SettingsCard
                        ActionIcon="{ui:FontIcon Glyph=&#xE8A7;}"
                        Click="GetCoordinatesSettingsCard_Clicked"
                        Header="{helpers:ResourceString Name=tbGetCoordinates}"
                        IsClickEnabled="True" />
                </StackPanel>

                <!--  FollowWindowsNightMode  -->
                <StackPanel
                    MaxWidth="1000"
                    HorizontalAlignment="Stretch"
                    Spacing="{StaticResource SettingsCardSpacing}"
                    Visibility="{x:Bind RadioButtonWindowsNightLight.IsChecked, Converter={StaticResource BoolToVisibilityConverter}, Mode=OneWay}">
                    <TextBlock Style="{StaticResource SettingsSectionHeaderTextBlockStyle}" Text="{helpers:ResourceString Name=TimePageNightLightHeader}" />
                    <controls:SettingsCard
                        Click="NightLightSettingsCard_Clicked"
                        Header="{helpers:ResourceString Name=TimePageOpenNightLight}"
                        IsClickEnabled="True" />
                </StackPanel>

                <!--  Offset time  -->
                <StackPanel
                    MaxWidth="1000"
                    HorizontalAlignment="Stretch"
                    Spacing="{StaticResource SettingsCardSpacing}"
                    Visibility="{x:Bind ViewModel.OffsetTimeSettingsCardVisibility, Mode=OneWay}">
                    <TextBlock Style="{StaticResource SettingsSectionHeaderTextBlockStyle}" Text="{helpers:ResourceString Name=lblOffset}" />
                    <controls:SettingsCard>
                        <controls:SettingsCard.Header>
                            <StackPanel Orientation="Horizontal" Spacing="25">
                                <NumberBox
                                    Header="{helpers:ResourceString Name=lblLight}"
                                    LargeChange="10"
                                    Maximum="999"
                                    Minimum="-999"
                                    SmallChange="1"
                                    SpinButtonPlacementMode="Inline"
                                    Value="{x:Bind ViewModel.OffsetLight, Mode=TwoWay}" />

                                <NumberBox
                                    Header="{helpers:ResourceString Name=lblDark}"
                                    LargeChange="10"
                                    Maximum="999"
                                    Minimum="-999"
                                    SmallChange="1"
                                    SpinButtonPlacementMode="Inline"
                                    Value="{x:Bind ViewModel.OffsetDark, Mode=TwoWay}" />
                            </StackPanel>
                        </controls:SettingsCard.Header>
                        <Button
                            MinWidth="80"
                            Command="{x:Bind ViewModel.SaveOffsetCommand}"
                            Content="{helpers:ResourceString Name=offsetButton}" />
                    </controls:SettingsCard>
                </StackPanel>

                <!--  Postpone  -->
                <TextBlock Style="{StaticResource SettingsSectionHeaderTextBlockStyle}" Text="{helpers:ResourceString Name=TimePageTextBlockPostponeInfoHeader}" />
                <controls:SettingsCard IsEnabled="False">
                    <controls:SettingsCard.Header>
                        <ComboBox Width="200" SelectedIndex="7">
                            <ComboBoxItem Content="{helpers:ResourceString Name=PostponeTime15}" />
                            <ComboBoxItem Content="{helpers:ResourceString Name=PostponeTime30}" />
                            <ComboBoxItem Content="{helpers:ResourceString Name=PostponeTime60}" />
                            <ComboBoxItem Content="{helpers:ResourceString Name=PostponeTime120}" />
                            <ComboBoxItem Content="{helpers:ResourceString Name=PostponeTime180}" />
                            <ComboBoxItem Content="{helpers:ResourceString Name=PostponeTime360}" />
                            <ComboBoxItem Content="{helpers:ResourceString Name=PostponeTime720}" />
                            <ComboBoxItem Content="{helpers:ResourceString Name=PostponeTimeSkipOnce}" />
                        </ComboBox>
                    </controls:SettingsCard.Header>
                    <ToggleSwitch
                        MinWidth="80"
                        OffContent="{helpers:ResourceString Name=PostponeButtonUnDelay}"
                        OnContent="{helpers:ResourceString Name=PostponeButtonDelay}" />
                </controls:SettingsCard>
                <controls:SettingsCard
                    Description="{helpers:ResourceString Name=TimePagePostponeInfoNominal}"
                    Header="{helpers:ResourceString Name=TimePageHeaderActiveDelays}"
                    IsEnabled="False" />

                <!--  Info  -->
                <!--  This settingscard should be deleted, because MVVM make value is bind by twoway. Although Offset settingscard use button  -->
                <TextBlock Style="{StaticResource SettingsSectionHeaderTextBlockStyle}" Text="{helpers:ResourceString Name=info}" />
                <controls:SettingsCard Header="{helpers:ResourceString Name=msgChangesSaved}" />
            </StackPanel>
        </Grid>
    </ScrollViewer>
</Page>
